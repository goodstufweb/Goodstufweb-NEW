<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>good stuf shop - Premium Store</title>
  <!-- Added mobile-first responsive CSS with proper breakpoints -->
  <style>
/* Mobile-first responsive design */
  @media (max-width: 319px) {
    /* Extra small devices */
    .logo { height: 32px; width: 32px; font-size: 12px; }
    .brand h1 { font-size: 14px; }
    .brand p { display: none; }
    .controls { gap: 4px; }
    .lang-select, .mode-toggle, .settings-btn, .cart { 
      padding: 4px 6px; font-size: 10px; 
    }
    .cart-count { min-width: 16px; height: 16px; font-size: 9px; }
  }
  
  @media (min-width: 320px) and (max-width: 374px) {
    /* Small phones */
    .logo { height: 36px; width: 36px; font-size: 13px; }
    .brand h1 { font-size: 15px; }
    .brand p { font-size: 9px; }
    .controls { gap: 5px; }
    .lang-select, .mode-toggle, .settings-btn, .cart { 
      padding: 5px 7px; font-size: 11px; 
    }
    .cart-count { min-width: 17px; height: 17px; font-size: 10px; }
  }
  
  @media (min-width: 375px) and (max-width: 424px) {
    /* Medium phones */
    .logo { height: 40px; width: 40px; font-size: 14px; }
    .brand h1 { font-size: 16px; }
    .brand p { font-size: 10px; }
    .controls { gap: 6px; }
    .lang-select, .mode-toggle, .settings-btn, .cart { 
      padding: 6px 8px; font-size: 12px; 
    }
    .cart-count { min-width: 18px; height: 18px; font-size: 11px; }
  }
  
  @media (min-width: 425px) and (max-width: 767px) {
    /* Large phones */
    .logo { height: 44px; width: 44px; font-size: 15px; }
    .brand h1 { font-size: 17px; }
    .brand p { font-size: 11px; }
    .controls { gap: 7px; }
    .lang-select, .mode-toggle, .settings-btn, .cart { 
      padding: 7px 9px; font-size: 13px; 
    }
    .cart-count { min-width: 19px; height: 19px; font-size: 12px; }
  }
@media (max-width: 767px) {
    /* Mobile hamburger menu */
    .navbar {
      padding: 12px 15px;
      flex-wrap: wrap;
    }
    
    .brand {
      order: 1;
      flex: 1;
    }
    
    .hamburger {
      order: 2;
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 44px;
      height: 44px;
      background: var(--card-bg);
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      box-shadow: var(--shadow);
    }
    
    .hamburger span {
      width: 24px;
      height: 2px;
      background: currentColor;
      margin: 2px 0;
      transition: 0.3s;
    }
    
    .controls {
      order: 3;
      display: none;
      width: 100%;
      margin-top: 15px;
      flex-direction: column;
      gap: 10px;
    }
    
    .controls.active {
      display: flex;
    }
    
    .lang-select, .mode-toggle, .settings-btn, .cart {
      width: 100%;
      text-align: center;
      padding: 12px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .hero {
      flex-direction: column;
      gap: 15px;
    }
    
    .hero-left {
      width: 100%;
      padding: 15px;
    }
    
    .hero h2 {
      font-size: 20px;
    }
    
    .grid {
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }
    
    .img-wrap {
      height: 150px;
    }
    
    .img-wrap img {
      max-width: 100%;
      height: auto;
      object-fit: cover;
    }
    
    .modal-card {
      max-width: 100%;
      margin: 0 10px;
    }
    
    .modal-inner {
      grid-template-columns: 1fr;
      padding: 15px;
    }
    
    .detail-img {
      height: 250px;
      max-width: 100%;
      object-fit: cover;
    }
    
    .close-x {
      right: 15px;
      top: 15px;
      background: rgba(0,0,0,0.5);
      color: white;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .cart-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
    
    .cart-item img {
      width: 100%;
      height: 120px;
      object-fit: cover;
    }
    
    input, select, button, .btn {
      min-height: 44px;
      font-size: 16px; /* Prevents zoom on iOS */
    }
    
    .qty button {
      min-width: 44px;
      min-height: 44px;
    }
  }
  
  @media (min-width: 768px) and (max-width: 1023px) {
    /* Tablets */
    .watermark { font-size: 80px; top: 8%; }
    .grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .img-wrap { height: 180px; }
    .hero { flex-direction: row; }
    .hero-left { width: 65%; }
    .hamburger { display: none; }
    .controls { display: flex; }
  }
  
  @media (min-width: 1024px) {
    /* Desktops */
    .watermark { font-size: 120px; top: 6%; }
    .hamburger { display: none; }
    .controls { display: flex; }
  }
  
  /* Mobile-first base styles */
  .container {
    width: 100%;
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 15px 60px;
  }
  
  /* Ensure all images are responsive */
  img {
    max-width: 100%;
    height: auto;
  }
  
  /* Improve touch targets */
  button, .btn, .cat-btn, .lang-select, .mode-toggle, .settings-btn, .cart {
    min-height: 44px;
    touch-action: manipulation;
  }
  
  /* Prevent horizontal overflow */
  body {
    overflow-x: hidden;
    width: 100%;
  }
  
  * {
    box-sizing: border-box;
    max-width: 100%;
  }
:root{
    --bg-1:#F8F6F1;
    --bg-2:#F1EDE6;
    --card-bg: #ffffff;
    --muted: #5b5b5b;
    --accent: #8A6A4F; /* warm premium */
    --accent-2:#B99274;
    --success:#2ecc71;
    --danger:#e74c3c;
    --glass: rgba(255,255,255,0.06);
    --shadow: 0 10px 30px rgba(0,0,0,0.12);
  }

  /* dark theme */
  body.dark {
    --bg-1:#0f0f10;
    --bg-2:#151418;
    --card-bg:#121214;
    --muted:#9aa0a6;
    --accent:#CEAB87;
    --accent-2:#A47E5C;
    --glass: rgba(255,255,255,0.03);
    --shadow: 0 12px 30px rgba(0,0,0,0.6);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background: linear-gradient(135deg, var(--bg-1), var(--bg-2));
    color: #111;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    transition: background .3s ease, color .3s ease;
    min-height:100vh;
    position:relative;
    overflow-y:auto;
  }
  body.dark { color: #eee; }
  /* watermark / textured background text */
body.dark .watermark { color: rgba(255,255,255,0.02); }

  /* NAV */
  .navbar{
    position:sticky;top:0;
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 22px;
    backdrop-filter: blur(6px);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
    border-bottom: 1px solid rgba(0,0,0,0.05);
    z-index:50;
  }
  body.dark .navbar{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
    border-bottom: 1px solid rgba(255,255,255,0.03);
  }

  .brand { display:flex; gap:12px; align-items:center; }
  .logo {
    height:48px; width:48px; border-radius:10px;
    background: linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;align-items:center;justify-content:center;color:white;font-weight:700;
    box-shadow: var(--shadow);
    font-size:18px;
  }
  .brand h1{font-size:18px;margin:0;}
  .brand p{margin:0;font-size:12px;color:var(--muted)}

  .controls {display:flex;gap:10px;align-items:center;}
  .lang-select, .mode-toggle, .settings-btn{
    background:var(--card-bg);
    border:1px solid rgba(0,0,0,0.05);
    padding:8px 12px;
    border-radius:10px;
    cursor:pointer;
    box-shadow: var(--shadow);
    transition: transform .15s ease, box-shadow .15s;
    color: inherit; /* Inherit text color from parent */
  }
  body.dark .lang-select, 
  body.dark .mode-toggle, 
  body.dark .settings-btn {
    border:1px solid rgba(255,255,255,0.1);
    color: white;
  }
  .lang-select select{
    background:transparent;
    border:0;
    outline:none;
    font-weight:600;
    color: inherit; /* Inherit text color from parent */
  }
  body.dark .lang-select select {
    color: white;
  }
.mode-toggle {display:flex;align-items:center;gap:8px;}
  .mode-toggle input{display:none}
  .toggle-pill{
    width:44px;height:24px;background:rgba(0,0,0,0.06);border-radius:30px;position:relative;
  }
  .toggle-dot{
    width:18px;height:18px;border-radius:50%;background:white;position:absolute;top:3px;left:3px;
    transition:left .2s ease, background .2s;
    box-shadow:0 4px 10px rgba(0,0,0,0.2);
  }
  body.dark .toggle-dot{ left:23px; background:var(--accent); }
  .cart {
    position:relative;
    cursor:pointer;
    padding:8px 12px;border-radius:10px;background:var(--card-bg); box-shadow:var(--shadow);
    display:flex;gap:8px;align-items:center;
    color: inherit; /* Inherit text color from parent */
  }
  body.dark .cart {
    color: white;
  }
.cart-count {
    min-width:22px;height:22px;border-radius:50%;background:var(--danger);color:white;font-size:12px;
    display:flex;align-items:center;justify-content:center;padding:0 6px;font-weight:700;
  }

  /* Main container */
  .container{max-width:1200px;margin:30px auto;padding:0 18px 80px}
  .hero {
    display:flex;justify-content:space-between;align-items:center;gap:20px;margin-bottom:28px;
  }
  .hero-left{
    max-width:720px;
    padding:20px;border-radius:14px;background:var(--glass);box-shadow:var(--shadow);
    border:1px solid rgba(0,0,0,0.03);
  }
  body.dark .hero-left{ border:1px solid rgba(255,255,255,0.03); }
  .hero h2{margin:0 0 8px;font-size:28px}
  .hero p{margin:0;color:var(--muted)}

  /* category list */
  .categories { display:flex; gap:12px; margin-top:16px; flex-wrap:wrap; }
  .cat-btn {
    padding:8px 14px;border-radius:12px;background:transparent;border:1px solid rgba(0,0,0,0.06);
    cursor:pointer;font-weight:600;transition:transform .12s, background .12s;
    color: inherit; /* Inherit text color from parent */
  }
  body.dark .cat-btn {
    border:1px solid rgba(255,255,255,0.1);
    color: white;
  }
.cat-btn.active { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; transform:translateY(-4px); }

  /* product grid */
  .grid {
    display:grid;
    grid-template-columns: repeat( auto-fit, minmax(260px, 1fr) );
    gap:24px;
    margin-top:26px;
  }

  .card {
    background:var(--card-bg);
    border-radius:14px;
    overflow:hidden;
    box-shadow:var(--shadow);
    transition:transform .18s ease, box-shadow .2s;
    border:1px solid rgba(0,0,0,0.04);
  }
  body.dark .card { border:1px solid rgba(255,255,255,0.03); }
  .card {
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }
  .card:hover{ 
    transform: translateY(-8px);
    box-shadow: 0 14px 28px rgba(0,0,0,0.15), 0 10px 10px rgba(0,0,0,0.1);
  }
.img-wrap { 
    height:220px;
    background:#f2f2f2; 
    display:flex;
    align-items:center;
    justify-content:center; 
    overflow:hidden; 
  }
  .img-wrap img { 
    width:100%; 
    height:100%; 
    object-fit:contain; /* Changed from cover to contain to show full image without cropping */
    transition: transform .35s ease; 
  }
.card:hover .img-wrap img{ transform:scale(1.04) }

  .card-body { padding:16px }
  .brand-name { color:var(--accent); font-weight:800; font-size:12px; letter-spacing:1px; text-transform:uppercase }
  .title { font-size:16px; margin:8px 0 12px; font-weight:700 }
  .price { font-size:18px;color:var(--success); font-weight:800 }
  .desc { font-size:13px;color:var(--muted); margin-top:8px }

  .card-actions { display:flex; gap:8px; align-items:center; margin-top:12px }
  .qty { display:flex; align-items:center; border-radius:8px; overflow:hidden; border:1px solid rgba(0,0,0,0.06) }
  .qty button{ width:36px;height:36px;border:0;background:transparent;cursor:pointer;font-weight:700 }
  .qty input{ width:54px; text-align:center; border:0; font-weight:700; background:transparent }

  .btn {
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:800;
    box-shadow: 0 8px 20px rgba(138,106,79,0.18);
    transition: transform .12s, box-shadow .12s;
  }
  .btn {
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }
  .btn:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 16px 40px rgba(138,106,79,0.22);
  }
.btn.ghost { background:transparent; color:var(--accent); border:1px solid rgba(0,0,0,0.06) }

  /* stock badge */

  /* modal (product detail & settings & cart) */
  .modal {
    position:fixed;left:0;top:0;width:100%;height:100%;display:none;
    align-items:center;justify-content:center; background: rgba(0,0,0,0.6); z-index:200;
    padding:20px;
    pointer-events: auto; /* Ensure modal is interactive */
  }
.modal {
  transition: opacity 0.3s ease;
  opacity: 0;
  pointer-events: none;
}
.modal.show {
  display: flex;
  opacity: 1;
  pointer-events: auto;
}
.modal-card { width:100%; max-width:980px; border-radius:14px; background:var(--card-bg); overflow:hidden; box-shadow:var(--shadow) }
  .modal-inner { display:grid; grid-template-columns: 1fr 1fr; gap:18px; padding:20px }
  .detail-img-container { position: relative; display: flex; align-items: center; justify-content: center; }
  .detail-img { width:100%; height:420px; object-fit:contain; border-radius:10px; }
.detail-info { padding:10px 8px; }
  .close-x { 
    position: absolute; 
    right: 18px; 
    top: 12px; 
    background: rgba(0,0,0,0.06); 
    border-radius: 8px; 
    padding: 6px 8px; 
    cursor: pointer; 
    z-index: 10; 
  }
  body.dark .close-x { 
    background: rgba(255,255,255,0.1); 
    color: white; 
  }
.arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.3); color: white; border: none; padding: 10px; cursor: pointer; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; z-index: 10; }
  .arrow.left { left: 10px; }
  .arrow.right { right: 10px; }

  .cart-list { padding:16px }
  .cart-item { display:flex; gap:12px; align-items:center; padding:12px; border-bottom:1px solid rgba(0,0,0,0.04) }
  .cart-item img { width:72px; height:72px; object-fit:contain; border-radius:8px }
.cart-empty { padding:40px; text-align:center; color:var(--muted) }
/* small responsive */
  @media (max-width:900px){
    .modal-inner { grid-template-columns: 1fr; }
    .detail-img { height:300px }
    .close-x {
      right: 12px;
      top: 12px;
      background: rgba(0,0,0,0.5);
      color: white;
      padding: 8px 10px;
      z-index: 1000; /* Ensure close button is above all */
    }
  }
</style>
</head>
<body>
<nav class="navbar">
    <div class="brand">
      <div class="logo">GS</div>
      <div>
        <h1>Good Stuf Shop</h1>
        <p id="slogan">Premium Collection</p>
      </div>
    </div>

    <!-- Mobile hamburger menu -->
    <div class="hamburger" onclick="toggleMobileMenu()" aria-label="Menu" role="button">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <div class="controls">
      <div class="lang-select" title="Schimbă limba">
        <select id="lang" aria-label="language">
          <option value="en">🇬🇧 English</option>
          <option value="ro">🇷🇴 Română</option>
          <option value="de">🇩🇪 Deutsch</option>
        </select>
      </div>

      <div class="mode-toggle" title="Light / Dark">
        <div style="font-size:12px;margin-right:6px" id="modeLabel">Light</div>
        <label class="toggle-pill" onclick="toggleTheme()" role="button" tabindex="0">
          <div class="toggle-dot"></div>
        </label>
      </div>

      <div class="settings-btn btn ghost" onclick="openSettings()" role="button" tabindex="0">Settings</div>

      <div class="cart" onclick="openCart()" role="button" tabindex="0">
        🛒 <div style="margin-left:8px">Cart</div>
        <div class="cart-count" id="cartCount">0</div>
      </div>
    </div>
  </nav>
<main class="container">
    <section class="hero">
      <div class="hero-left">
        <h2 id="heroTitle">Premium Collection</h2>
        <p id="heroDesc">Select a category or click on a product for details. In settings you can change theme and language.</p>

        <div class="categories" id="categoryList">
          <button class="cat-btn active" data-cat="all">All</button>
          <button class="cat-btn" data-cat="shirts">Shirts</button>
          <button class="cat-btn" data-cat="jackets">Jackets</button>
          <button class="cat-btn" data-cat="shoes">Shoes</button>
          <button class="cat-btn" data-cat="accessories">Accessories</button>
        </div>
      </div>

      <div style="width:320px; text-align:center;">
        <div style="padding:18px;border-radius:12px;background:var(--glass);box-shadow:var(--shadow)">
          <h3 id="quickTitle">Most Popular</h3>
          <p id="quickDesc" style="color:var(--muted)">Our top products</p>
          <div style="margin-top:10px"><button class="btn" onclick="showPopular()" style="width:100%"><span id="btnSettings">See top products</span></button></div>
</div>
      </div>
    </section>

    <section class="grid" id="productGrid">
      <!-- cards injected by JS -->
    </section>
  </main>

  <!-- Product Detail Modal -->
  <div id="detailModal" class="modal" aria-hidden="true">
    <div class="modal-card">
  <div style="position:relative">
    <div class="close-x" onclick="closeDetail()" style="font-size:20px;padding:8px 12px">✕</div>
  </div>
<div class="modal-inner">
        <div class="detail-img-container">
          <button class="arrow left" onclick="changeImage(-1)">❮</button>
          <img id="detailImg" class="detail-img" src="" alt="product image" />
          <button class="arrow right" onclick="changeImage(1)">❯</button>
        </div>
        <div class="detail-info">
          <div class="brand-name" id="detailBrand"></div>
          <h2 id="detailName"></h2>
          <div class="price" id="detailPrice"></div>
          <p id="detailDesc" class="desc"></p>
      <div style="margin-top:14px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
<div class="qty" style="align-items:center;">
              <button onclick="changeModalQty(-1)">-</button>
              <input id="modalQty" type="number" value="1" min="1" style="width:48px;background:transparent;color:inherit">
              <button onclick="changeModalQty(1)">+</button>
            </div>
            <button id="modalAddBtn" class="btn">Add to cart</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div id="cartModal" class="modal" aria-hidden="true">
    <div class="modal-card" style="max-width:720px;">
      <div style="display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(0,0,0,0.04)">
        <h3 id="cartTitle">Shopping Cart</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn ghost" onclick="closeCart()">Close</button>
          <button class="btn" onclick="checkout()">Checkout</button>
        </div>
      </div>
      <div class="cart-list" id="cartList">
        <!-- items -->
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal" aria-hidden="true">
    <div class="modal-card" style="max-width:540px;">
      <div style="display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(0,0,0,0.04)">
        <h3 id="settingsTitle">Settings</h3>
        <div style="font-size:18px;cursor:pointer" onclick="closeSettings()">✕</div>
      </div>
      <div style="padding:18px; gap:12px; display:flex; flex-direction:column;">
        <div>
          <label style="font-weight:700">Theme</label><br/>
          <small id="themeNote" style="color:var(--muted)">Light / Dark</small>
          <div style="margin-top:8px">
            <button class="cat-btn" onclick="setTheme('light')">Light</button>
            <button class="cat-btn" onclick="setTheme('dark')">Dark</button>
          </div>
        </div>

        <div>
          <label style="font-weight:700">Credits</label>
          <div style="margin-top:8px;padding:12px;border-radius:10px;background:var(--glass)">
            <div><strong>Made by:</strong> Darius — code & design</div>
            <div><strong>Distribution & Shipping:</strong> Iosua</div>
</div>
        </div>

        <div>
          <label style="font-weight:700">Language</label>
          <div style="margin-top:8px">
            <select id="langSettings" onchange="setLangFromSettings(this.value)">
              <option value="en">English</option>
              <option value="ro">Română</option>
              <option value="de">Deutsch</option>
            </select>
          </div>
        </div>

      </div>
    </div>
  </div>
<script>
// Device detection for mobile/desktop classes
function detectDevice() {
  const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                  (window.innerWidth <= 768);
  
  if (isMobile) {
    document.body.classList.add('is-mobile');
    document.body.classList.remove('is-desktop');
  } else {
    document.body.classList.add('is-desktop');
    document.body.classList.remove('is-mobile');
  }
}

// Toggle mobile menu
function toggleMobileMenu() {
  const controls = document.querySelector('.controls');
  controls.classList.toggle('active');
}

// Fix all interactive elements for mobile
function fixMobileInteractivity() {
  // Ensure all buttons and interactive elements have proper cursor and pointer events
  const interactiveElements = document.querySelectorAll('button, .btn, .cat-btn, .lang-select, .mode-toggle, .settings-btn, .cart, select, input');
  interactiveElements.forEach(el => {
    el.style.cursor = 'pointer';
    el.style.pointerEvents = 'auto';
  });
  
  // Ensure modals don't block content behind them
  const modals = document.querySelectorAll('.modal');
  modals.forEach(modal => {
    modal.style.pointerEvents = 'auto';
  });
}
/* ---------- Data ---------- */
const products = [
  { id:1, brand:"Ralph Lauren", name_ro:"Ralph Lauren Hoodie", name_en:"Ralph Lauren Hoodie", name_de:"Ralph Lauren Hoodie",
    price:29.99, desc_ro:"Hoodie premium din bumbac.", desc_en:"Premium cotton hoodie.", desc_de:"Premium Baumwoll-Hoodie.",
img:"https://si.geilicdn.com/pcitem1910570286-0a890000019624bf5a660a2396f4_1920_1920.jpg",
    category:"shirts", isNew:true, sizes:["XS", "S", "M", "L", "XL"],
images: [
      "https://si.geilicdn.com/pcitem1910570286-0a890000019624bf5a660a2396f4_1920_1920.jpg",
      "https://si.geilicdn.com/pcitem1910570286-07740000019624bf5cd40a2395a3_1920_1920.jpg",
      "https://si.geilicdn.com/pcitem1910570286-0aea0000019624bf550b0a20e7c7_1920_1920.jpg",
      "https://si.geilicdn.com/pcitem1910570286-10e20000019624bf48780a2301b4_1920_1920.jpg"
    ] },
  { id:2, brand:"Ralph Lauren", name_ro:"Ralph Lauren T-Shirt", name_en:"Ralph Lauren T-Shirt", name_de:"Ralph Lauren T-Shirt",
    price:26.99, desc_ro:"Hoodie premium din bumbac.", desc_en:"Premium cotton hoodie.", desc_de:"Premium Baumwoll-Hoodie.",
img:"https://si.geilicdn.com/pcitem1910570286-0b5f0000019624c3a4890a21146b_1281_1280.jpg",
    category:"shirts", originalPrice:26.99, discount:0, isNew:true, sizes:["XS", "S", "M", "L", "XL"],
    images: [
      "https://si.geilicdn.com/pcitem1910570286-0b5f0000019624c3a4890a21146b_1281_1280.jpg",
      "https://si.geilicdn.com/pcitem1910570286-076b0000019624c39f940a239646_1280_1280.jpg",
      "https://si.geilicdn.com/pcitem1910570286-13050000019624c3b10c0a2303ee_1280_1280.jpg",
      "https://si.geilicdn.com/pcitem1910570286-0b380000019624c3aa390a231316_1280_1280.jpg"
    ] },
  { id:3, brand:"Ralph Lauren", name_ro:"Ralph Lauren Polo", name_en:"Ralph Lauren Polo", name_de:"Ralph Lauren Polo",
    price:26.99, desc_ro:"Tricou clasic cu mânecă scurtă, perfect pentru orice ocazie.", desc_en:"Classic short sleeve polo shirt, perfect for any occasion.", desc_de:"Klassisches Kurzarm-Polohemd, perfekt für jeden Anlass.",
    img:"https://si.geilicdn.com/pcitem1910570286-04b30000019624c3a60f0a8133cc_1280_1280.jpg",
    category:"shirts", originalPrice:26.99, discount:0, isNew:true, sizes:["XS", "S", "M", "L", "XL"],
    images: [
      "https://si.geilicdn.com/pcitem1910570286-04b30000019624c3a60f0a8133cc_1280_1280.jpg",
      "https://si.geilicdn.com/pcitem1910570286-10ec0000019624c3adb70a20e672_1280_1280.jpg",
      "https://si.geilicdn.com/pcitem1910570286-190a0000019624c3abda0a23037f_1280_1280.jpg",
      "https://si.geilicdn.com/pcitem1910570286-16120000019624c3b5c00a210349_1280_1280.jpg"
    ] },
  { id:4, brand:"Ralph Lauren", name_ro:"Ralph Lauren Zipper", name_en:"Ralph Lauren Zipper", name_de:"Ralph Lauren Zipper",
    price:29.99, desc_ro:"Geacă elegantă cu fermoar, perfectă pentru toate ocaziile.", desc_en:"Elegant zipper jacket, perfect for all occasions.", desc_de:"Elegante Reißverschluss-Jacke, perfekt für alle Anlässe.",
    img:"https://si.geilicdn.com/open260671440-1234478995-7e5900000190a22d1fe30aa0233d_2000_2000.jpg",
    category:"jackets", originalPrice:29.99, discount:0, isNew:false, sizes:["XS", "S", "M", "L", "XL"],
    images: [
      "https://si.geilicdn.com/open260671440-1234478995-7e5900000190a22d1fe30aa0233d_2000_2000.jpg",
      "https://si.geilicdn.com/open260671440-1234478995-1fa600000190a22d54d60a210298_2000_2000.jpg",
      "https://si.geilicdn.com/open260671440-1234478995-133b00000190a22d4e810a22d234_2000_2000.jpg",
      "https://si.geilicdn.com/open260671440-1234478995-74b000000190a22d29480a232357_2000_2000.jpg"
    ] },
  { id:5, brand:"Nike", name_ro:"Air Force 1", name_en:"Air Force 1", name_de:"Air Force 1",
    price:44.99, desc_ro:"Sneakers iconice albe, stil clasic.", desc_en:"Classic white iconic sneakers.", desc_de:"Klassische weiße Sneaker.",
    img:"https://gomagcdn.ro/domains2/sneakerit.ro/files/product/original/air-force-1-07-white-915029.jpeg",
    images:[
      "https://gomagcdn.ro/domains2/sneakerit.ro/files/product/original/air-force-1-07-white-915029.jpeg",
      "https://img01.ztat.net/article/spp-media-p1/8187b0d7a70d4aba9f7b198098d33d7e/978503b250e648be96672a18f2c67d4b.jpg?imwidth=762"
      ],
    category:"shoes", originalPrice:44.99, discount:0, isNew:true, sizes:["36","37","38","39","40","41","42","43","44","45"] },
  { id:6, brand:"Louis Vuitton", name_ro:"Louis Vuitton Moneybag", name_en:"Louis Vuitton Moneybag", name_de:"Louis Vuitton Moneybag",
    price:25.99, desc_ro:"Portofel din piele cu monogramă LV.", desc_en:"Elegant leather wallet with LV monogram.", desc_de:"Elegante Lederbrieftasche mit LV-Monogramm.",
    img:"https://cdn1.jolicloset.com/img4/full/2025/09/2475738-2.jpg",
    category:"accessories", originalPrice:25.99, discount:0, isNew:false, sizes:[] },
  { id:7, brand:"Louis Vuitton", name_ro:"Louis Vuitton Belt", name_en:"Louis Vuitton Belt", name_de:"Louis Vuitton Belt",
    price:12.99, desc_ro:"Curea Louis Vuitton din piele.", desc_en:"Louis Vuitton leather belt.", desc_de:"Louis Vuitton Leder Gürtel.",
img:"https://img.alicdn.com/img/ibank/O1CN01zEUsYy1gRiGQzjUfQ_!!2217478184139-0-cib.jpg",
    category:"accessories", originalPrice:15.99, discount:0, isNew:false, sizes:[],
    images: [
      "https://img.alicdn.com/img/ibank/O1CN01zEUsYy1gRiGQzjUfQ_!!2217478184139-0-cib.jpg",
      "https://img.alicdn.com/img/ibank/O1CN013bDy8V1gRiGTdtHqA_!!2217478184139-0-cib.jpg",
      "https://img.alicdn.com/img/ibank/O1CN01Hci9F31gRiGUOcPE9_!!2217478184139-0-cib.jpg"
    ] },
  { id:8, brand:"Burberry", name_ro:"Burberry Jacket", name_en:"Burberry Jacket", name_de:"Burberry Jacket",
    price:89.99, desc_ro:"Geacă Burberry premium.", desc_en:"Premium Burberry jacket.", desc_de:"Premium Burberry Jacke.",
    img:"https://si.geilicdn.com/open1646458249-1234478995-55e800000193a69cb00c0aa08290_640_640.jpg",
    category:"jackets", originalPrice:89.99, discount:0, isNew:false, sizes:["XS", "S", "M", "L", "XL"],
    images: [
      "https://si.geilicdn.com/open1646458249-1234478995-55e800000193a69cb00c0aa08290_640_640.jpg",
      "https://si.geilicdn.com/open1646458249-1234478995-55da00000193a69ca6800aa08290_640_640.jpg",
      "https://si.geilicdn.com/open1646458249-1234478995-58dd00000193a69caeb60a22d234_1080_1080.jpg",
      "https://si.geilicdn.com/open1646458249-1234478995-2f9100000193a69cb5920a232357_1080_1080.jpg",
      "https://si.geilicdn.com/open1646458249-1234478995-63eb00000193a69ca6c50a210298_640_640.jpg"
    ] }
];

let cart = [];
let lang = localStorage.getItem('au_lang') || 'en';
let theme = localStorage.getItem('au_theme') || 'light';
if(theme === 'dark') document.body.classList.add('dark');

/* translations */
const T = {
  en: {
    premium: "Most Popular", 
    desc: "Premium quality products for discerning tastes.",
    add: "View Product",
    remove: "Remove",
    restock: "Restocking soon",
    cart_empty: "Your cart is empty",
    checkout: "Checkout",
    order_ok: "Order placed! Thank you 😊"
  },
  ro: {
    premium: "Most Popular",
    desc: "Premium quality products for discerning tastes.",
    add: "Vezi Produs",
    remove: "Șterge",
    restock: "Revine curând",
    cart_empty: "Coșul este gol",
    checkout: "Finalizare comandă",
    order_ok: "Comandă plasată! Mulțumim  😊"
  },
  de: {
    premium: "Beliebteste Produkte",
    desc: "Premium-Qualität für anspruchsvolle Geschmäcker.",
    add: "Produkt ansehen",
    remove: "Entfernen",
    restock: "Bald wieder verfügbar",
    cart_empty: "Ihr Warenkorb ist leer",
    checkout: "Zur Kasse",
    order_ok: "Bestellung erfolgreich! Danke 😊"
  }
};

/* ---------- Helpers ---------- */
function currency(n){ return `${n.toFixed(2)}€` }
function getText(k, ...args){ return T[lang][k] ? (typeof T[lang][k] === 'function' ? T[lang][k](...args) : T[lang][k]) : k }

/* ---------- Render products ---------- */
function generateRandomStock() {
  return Math.floor(Math.random() * 15) + 1; // Random between 1-15
}

function renderProducts(cat='all'){
  const grid = document.getElementById('productGrid');
  const list = (cat==='all') ? products : products.filter(p=>p.category===cat);
  const html = list.map(p=>{
    // translate description & button text
    const desc = (lang==='ro')?p.desc_ro:(lang==='en'?p.desc_en:p.desc_de);
    const addText = getText('add');
    const stock = generateRandomStock();
    const showDiscount = p.discount > 0;
    const finalPrice = showDiscount ? p.price * (1 - p.discount) : p.price;
    
    return `
      <article class="card" data-id="${p.id}">
        <div class="img-wrap" onclick="openDetail(${p.id})"><img src="${p.img}" alt="${escapeHtml(p.name)}"></div>
        <div class="card-body">
          <div style="display:flex; justify-content:space-between; align-items:center">
            <div class="brand-name">${p.brand}</div>
            ${p.isNew ? '<div style="background:var(--success); color:white; padding:2px 6px; border-radius:4px; font-size:10px; font-weight:bold">NEW</div>' : ''}
          </div>
          <div class="title">${(lang==='en')?p.name_en:(lang==='ro'?p.name_ro:p.name_de)}</div>
          <div style="display:flex; align-items:center; gap:8px">
            <div class="price">${currency(finalPrice)}</div>
            ${showDiscount ? `<div style="text-decoration:line-through; color:var(--muted); font-size:14px">${currency(p.originalPrice)}</div>` : ''}
            ${showDiscount ? `<div style="background:var(--danger); color:white; padding:2px 6px; border-radius:4px; font-size:10px; font-weight:bold">-${Math.round(p.discount*100)}%</div>` : ''}
          </div>
          <div class="desc">${desc}</div>
<div class="card-actions">
            <button class="btn" style="width:100%" onclick="openDetail(${p.id})">${addText}</button>
          </div>
        </div>
      </article>
    `;
  }).join('');
  grid.innerHTML = html;
}

/* small helpers for quick qty controls */
function decreaseQuick(id){ const el=document.getElementById('q-'+id); if(!el) return; el.value = Math.max(1, parseInt(el.value||1)-1) }
function increaseQuick(id){ const el=document.getElementById('q-'+id); if(!el) return; el.value = Math.min(parseInt(el.max||999), parseInt(el.value||1)+1) }

/* ---------- Detail modal ---------- */
let currentDetail = null;
let currentImageIndex = 0;

function openDetail(id){
  const p = products.find(x=>x.id===id); if(!p) return;
  currentDetail = p;
  currentImageIndex = 0;
  document.getElementById('detailImg').src = p.images ? p.images[0] : p.img;
  document.getElementById('detailBrand').textContent = p.brand;
  document.getElementById('detailName').textContent = (lang==='ro')?p.name_ro:(lang==='en'?p.name_en:p.name_de);
  document.getElementById('detailPrice').textContent = currency(p.price);
  const desc = (lang==='en')?p.desc_en:(lang==='ro'?p.desc_ro:p.desc_de);
  document.getElementById('detailDesc').innerHTML = `
    <p>${desc}</p>
    ${p.sizes && p.sizes.length > 0 ? `
    <div style="margin-top:16px">
      <div style="font-weight:bold;margin-bottom:8px">Available Sizes:</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        ${p.sizes.map(size => `<span style="padding:6px 12px;background:var(--glass);border-radius:6px">${size}</span>`).join('')}
      </div>
    </div>
    ` : ''}
  `;
  
  const stockEl = document.getElementById('detailStock');
  document.getElementById('modalQty').value = 1;
  document.getElementById('modalAddBtn').disabled = false;
  document.getElementById('detailModal').classList.add('show');
}
function closeDetail(){ 
  const modal = document.getElementById('detailModal');
  modal.classList.remove('show');
  setTimeout(() => {
    currentDetail = null;
    currentImageIndex = 0;
  }, 300); // Match the CSS transition duration
}
function changeImage(direction) {
  if (!currentDetail || !currentDetail.images) return;
  
  currentImageIndex += direction;
  
  if (currentImageIndex >= currentDetail.images.length) {
    currentImageIndex = 0;
  } else if (currentImageIndex < 0) {
    currentImageIndex = currentDetail.images.length - 1;
  }
  
  document.getElementById('detailImg').src = currentDetail.images[currentImageIndex];
}

/* modal qty */
function changeModalQty(delta){
  const el = document.getElementById('modalQty');
  if(!el || !currentDetail) return;
  let v = Math.max(1, parseInt(el.value||1) + delta);
  el.value = v;
}

/* add from modal */
document.getElementById('modalAddBtn').addEventListener('click', ()=>{
  if(!currentDetail) return;
  const qty = parseInt(document.getElementById('modalQty').value || 1);
  addToCart(currentDetail.id, qty);
  closeDetail();
});

/* ---------- Cart ---------- */
function addToCart(id, qty=1){
  const p = products.find(x=>x.id===id); if(!p) return;
  const existing = cart.find(i=>i.id===id);
  qty = Math.max(1, qty);
  const finalPrice = p.discount > 0 ? p.price * (1 - p.discount) : p.price;
  if(existing){ existing.qty += qty; }
  else { cart.push({ id:p.id, name:(lang==='ro')?p.name_ro:(lang==='en'?p.name_en:p.name_de), brand:p.brand, price:finalPrice, img:p.img, qty }); }
  saveState();
  renderProducts(getActiveCategory());
  updateCartUI();
}

function removeFromCart(id){
  const item = cart.find(i=>i.id===id);
  if(!item) return;
  cart = cart.filter(i=>i.id!==id);
  saveState();
  updateCartUI();
  renderProducts(getActiveCategory());
}

function updateQtyCart(id, newQty){
  const item = cart.find(i=>i.id===id); if(!item) return;
  newQty = Math.max(1, parseInt(newQty||1));
  item.qty = newQty;
  saveState();
  updateCartUI();
  renderProducts(getActiveCategory());
}

function openCart(){
  document.getElementById('cartModal').classList.add('show');
  updateCartUI();
}
function closeCart(){ 
  document.getElementById('cartModal').classList.remove('show'); 
}
function updateCartUI(){
  const list = document.getElementById('cartList');
  if(cart.length === 0){
    list.innerHTML = `<div class="cart-empty">${getText('cart_empty')}</div>`;
  } else {
    let html = '';
    let total = 0;
    cart.forEach(it=>{
      total += it.price * it.qty;
      html += `<div class="cart-item">
        <img src="${it.img}" alt="${escapeHtml(it.name)}">
        <div style="flex:1">
          <div style="font-weight:800;color:var(--accent)">${it.brand}</div>
          <div style="font-weight:700">${it.name}</div>
          <div style="color:var(--muted);margin-top:6px">
            <input type="number" value="${it.qty}" min="1" style="width:60px" onchange="updateQtyCart(${it.id}, this.value)">
          </div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:800;color:var(--success)">${currency(it.price*it.qty)}</div>
          <div style="margin-top:10px">
            <button class="btn ghost" onclick="removeFromCart(${it.id})">${getText('remove')}</button>
          </div>
        </div>
      </div>`;
    });
    html += `<div style="padding:12px"><div class="cart-total">Total: ${currency(total)}</div>
        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;">
          <button class="btn ghost" onclick="closeCart()" style="flex:1">Continue shopping</button>
          <button class="btn" onclick="checkout()" style="flex:1">${getText('checkout')}</button>
        </div>
</div>`;
    list.innerHTML = html;
  }
  document.getElementById('cartCount').textContent = cart.reduce((s,i)=>s+i.qty,0);
}

/* checkout */
function checkout(){
  if(cart.length===0){ alert(getText('cart_empty')); return; }
  
  const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
  const itemsText = cart.map(item => `${item.qty}x ${item.brand} - ${item.name} (${currency(item.price)})`).join('\n');
  const email = 'goodstufweb@gmail.com';
  
  // Create email modal
  const modal = document.createElement('div');
  modal.style.position = 'fixed';
  modal.style.top = '0';
  modal.style.left = '0';
  modal.style.width = '100%';
  modal.style.height = '100%';
  modal.style.backgroundColor = 'rgba(0,0,0,0.7)';
  modal.style.display = 'flex';
  modal.style.alignItems = 'center';
  modal.style.justifyContent = 'center';
  modal.style.zIndex = '1000';
  
  const modalContent = document.createElement('div');
  modalContent.style.backgroundColor = 'var(--card-bg)';
  modalContent.style.padding = '24px';
  modalContent.style.borderRadius = '12px';
  modalContent.style.maxWidth = '500px';
  modalContent.style.width = '90%';
  
  modalContent.innerHTML = `
    <h3 style="margin-top:0">${lang === 'ro' ? 'Contactează-ne' : 'Contact Us'}</h3>
    <p>${lang === 'ro' ? 'Trimite un email la:' : 'Send an email to:'}</p>
    <div style="display:flex; gap:8px; margin:16px 0">
      <input type="text" id="emailToCopy" value="${email}" readonly style="flex:1; padding:10px; border-radius:8px; border:1px solid rgba(0,0,0,0.1)">
      <button class="btn" onclick="copyEmail()" style="white-space:nowrap">${lang === 'ro' ? 'Copiază' : 'Copy'}</button>
    </div>
    <p>${lang === 'ro' ? 'sau folosește butonul de mai jos:' : 'or use the button below:'}</p>
    <div style="margin-top:20px; display:flex; gap:12px">
      <button class="btn ghost" onclick="document.body.removeChild(this.parentNode.parentNode.parentNode)">${lang === 'ro' ? 'Închide' : 'Close'}</button>
    </div>
  `;
  
  modal.appendChild(modalContent);
  document.body.appendChild(modal);
  
  // Close when clicking outside
  modal.addEventListener('click', (e) => {
    if(e.target === modal) {
      document.body.removeChild(modal);
    }
  });
  
  // Clear cart
  cart = [];
  saveState();
  updateCartUI();
  renderProducts(getActiveCategory());
  closeCart();
}

function copyEmail() {
  const input = document.getElementById('emailToCopy');
  input.select();
  document.execCommand('copy');
  alert(lang === 'ro' ? 'Email copiat!' : 'Email copied!');
}

/* ---------- Settings & UI ---------- */
function openSettings(){ document.getElementById('settingsModal').classList.add('show'); document.getElementById('langSettings').value = lang }
function closeSettings(){ 
  document.getElementById('settingsModal').classList.remove('show');
}
function setTheme(t){
  theme = t;
  localStorage.setItem('au_theme', t);
  if(t==='dark') document.body.classList.add('dark'); else document.body.classList.remove('dark');
  document.getElementById('modeLabel').textContent = t==='dark' ? 'Dark' : 'Light';
}
function toggleTheme(){
  setTheme(theme === 'dark' ? 'light' : 'dark');
}

/* language */
document.getElementById('lang').value = lang;
document.getElementById('lang').addEventListener('change', e=> setLang(e.target.value));
function setLangFromSettings(v){ setLang(v); document.getElementById('lang').value = v; }
function setLang(v){
  lang = v; localStorage.setItem('au_lang', v);
  // update visible texts
  document.getElementById('heroTitle').textContent = getText('premium');
  document.getElementById('heroDesc').textContent = getText('desc');
  document.getElementById('btnSettings').textContent = getText('premium');
  document.getElementById('slogan').textContent = getText('desc');
  renderProducts(getActiveCategory());
}

/* categories */
document.querySelectorAll('.cat-btn').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('.cat-btn').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    renderProducts(b.dataset.cat);
  });
});
function getActiveCategory(){ const a = document.querySelector('.cat-btn.active'); return a ? a.dataset.cat : 'all' }

/* persistence */
function saveState(){
  try {
    localStorage.setItem('au_cart', JSON.stringify(cart));
    localStorage.setItem('au_products', JSON.stringify(products.map(p=>({id:p.id,stock:p.stock}))));
  } catch(e){}
}
function loadState(){
  try {
    const saved = JSON.parse(localStorage.getItem('au_cart') || '[]'); cart = saved;
    const savedProd = JSON.parse(localStorage.getItem('au_products') || '[]');
    if(Array.isArray(savedProd)){
      savedProd.forEach(s=>{
        const p = products.find(x=>x.id===s.id);
        if(p && typeof s.stock === 'number') p.stock = s.stock;
      });
    }
  } catch(e){}
}

/* util safe escape */
function escapeHtml(s){ return String(s).replace(/[&<>"]/g, c=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])) }
/* init */
function init(){
  detectDevice(); // Detect device type
  loadState();
  setLang(lang);
  setTheme(theme);
  renderProducts();
  updateCartUI();
  fixMobileInteractivity(); // Fix mobile interactivity
  
  // Add resize listener for device detection
  window.addEventListener('resize', detectDevice);
  
  // Re-apply interactivity fixes after any DOM changes
  setTimeout(fixMobileInteractivity, 100);
}
init();
/* close modals when clicking outside */
window.addEventListener('click', (ev)=>{
  const d = document.getElementById('detailModal');
  if(ev.target === d) closeDetail();
  const c = document.getElementById('cartModal');
  if(ev.target === c) closeCart();
  const s = document.getElementById('settingsModal');
  if(ev.target === s) closeSettings();
  
  // Close mobile menu when clicking outside
  if (!ev.target.closest('.controls') && !ev.target.closest('.hamburger') && 
      document.querySelector('.controls').classList.contains('active')) {
    document.querySelector('.controls').classList.remove('active');
  }
});
</script>
</body>
</html>
